<div class="dashboard-container" *ngIf="!loading">
  <h2 class="mb-4">Dashboard</h2>

  <div class="stats-row">
    <div class="stat-card blue">
      <h3>{{ totalIssues }}</h3>
      <p>Total Issues</p>
    </div>

    <div class="stat-card green">
      <h3>{{ openIssues }}</h3>
      <p>Open</p>
    </div>

    <div class="stat-card orange">
      <h3>{{ inProgressIssues }}</h3>
      <p>In Progress</p>
    </div>

    <div class="stat-card teal">
      <h3>{{ resolvedIssues }}</h3>
      <p>Resolved</p>
    </div>

    <div class="stat-card purple">
      <h3>{{ closedIssues }}</h3>
      <p>Closed</p>
    </div>

    <div class="stat-card red">
      <h3>{{ highPriority }}</h3>
      <p>High Priority</p>
    </div>
  </div>

  <!-- RECENT ISSUES -->
  <div class="card mt-4 p-3 shadow-sm">
    <h4>Recent Issues</h4>

    <table class="table table-striped mt-3" *ngIf="recentIssues.length > 0">
      <thead>
        <tr>
          <th>Title</th>
          <th>Status</th>
          <th>Priority</th>
          <th>Created</th>
          <th>View</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let issue of recentIssues">
          <td>{{ issue.title }}</td>
          <td>{{ issue.status }}</td>
          <td>{{ issue.priority }}</td>
          <td>{{ issue.createdAt | date : 'short' }}</td>
          <td><a [routerLink]="['/issues', issue.id]" class="btn btn-primary btn-sm">Open</a></td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="recentIssues.length === 0" class="text-muted">No recent issues.</p>
  </div>
</div>

<div *ngIf="loading" class="text-center py-5">
  <div class="spinner-border"></div>
  <p class="mt-2 text-muted">Loading dashboard...</p>
</div>
